{% extends 'base1.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}
<div class="module message" style="height: 400pt;overflow-y: auto;">
    <div class="module-head">
        <h3>Complaints Management Tab</h3>
    </div>
    <div class="module-option clearfix">
        <div class="pull-left">
            Filter : &nbsp;
            <div class="btn-group">
                <button class="btn">All</button>
            </div>
            <div class="btn-group">
                <button class="btn">Pending : <i class="btn btn-xs btn-round btn-warning">{{pending.count}}</i></button>
            </div>
            <div class="btn-group">
                <button class="btn">Approved : <i class="btn btn-xs btn-round btn-success">{{approved.count}}</i></button>
            </div>
            <div class="btn-group">
                <button class="btn">Denied : <i class="btn btn-xs btn-round btn-danger">{{denied.count}}</i></button>
            </div>
        </div>
        <div class="pull-right">
            {% if request.user.category.name == 'Prison_Welfare_Officer' %}
            <a href="{% url 'complaint_add' %}" class="btn btn-primary">Send Complaint</a>
            {% endif %}
        </div>
    </div>
    <div class="module-body table">								

        <table class="table table-message">
            <tbody>
                <tr class="heading">
                    <td class="cell-icon"></td>
                    <td class="cell-title">Complaint</td>
                    <td class="cell-title">Requester</td>
                    <td class="cell-status hidden-phone hidden-tablet">Status</td>
                    <td class="cell-time align-right">Court Date</td>
                </tr>
                {% for complaint in complaints %}  
                {% if complaint.status == "Pending" %}
                <tr class="task">
                {% else %}
                <tr class="task resolved">
                {% endif %}    
                    <td class="cell-icon"><i class="icon-checker high">{{forloop.counter}}</i></td>
                    <td class="cell-title"><div><a href="{% url 'complaint_details' complaint.id %}">{{complaint.description}}</a></div></td>
                    <td class="cell-title"><div><a class="modal_delete" data-toggle="modal" data-target="#deletemodal" data-url="{% url 'prisoner_details_modal' complaint.prisoner.id %}" >{{complaint.prisoner}}</a></div></td>
                    <td class="cell-status hidden-phone hidden-tablet">
                        {% if complaint.status == "Approved" %}
                        <a class="btn btn-xs btn-success" href="{% url 'complaint_details' complaint.id %}">
                        {% elif complaint.status == "Denied" %}    
                        <a class="btn btn-xs btn-danger" href="{% url 'complaint_details' complaint.id %}">
                        {% else %}
                        <a class="btn btn-xs btn-warning" href="{% url 'complaint_details' complaint.id %}">
                        {% endif %}
                        {{complaint.status}}
                        </a>
                    </td>
                    <td class="cell-time align-right">{{complaint.date}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="module-foot">
    </div>
</div>
<div class="modal fade" id="deletemodal" tabindex="-1" role="dialog" aria-labelledby="deletemodalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm mymodal" role="document">
        
    </div>
</div><!-- /.delete modal -->
{% endblock %}
{% block script %}
<script src="{% static 'scripts/modal_delete.js' %}" type="text/javascript"></script>
{% endblock %}